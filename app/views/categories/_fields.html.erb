<%= render 'shared/error_messages', object: f.object %>

<div class="form-group">
  <%= f.label :name %>
  <%= f.text_field :name, class: "form-control" %>
</div>

<div class="form-group">
  <%= f.label :description %>
  <%= f.text_area :description, rows: 5, class: "form-control" %>
</div>

<div class="form-group">
  <%= f.label :product_nr_prefix %>
  <%= f.text_field :product_nr_prefix, class: "form-control" %>
</div>

<div class="form-group">
  <%= f.label :background_color %>
  <%= f.color_field :background_color, class: "form-control" %>
</div>

<div class="form-group">
  <%= f.label :logo %>
  <%= f.file_field :logo %>
</div>


<div class="form-group">
  <%= f.label :pictures %>

  <% if @category.new_record? || @category.attached_assets.size == 0 %>
    <%= f.file_field :attached_assets, multiple: true, name: "category[attached_assets_attributes][][asset]" %>
<% end %>

  <div>
    <% @category.attached_assets.each do |asset| %>
      <%= f.fields_for :attached_assets, asset do |builder| %>
      <% unless @category.new_record? %>
      <%= builder.check_box '_destroy' %>
    <%= builder.label :_destroy, asset.asset_file_name %>
    <%= builder.file_field :asset %>
  <% end %>
  <% end %>
  <% end %>

    <%#= file_field_tag('category_attached_assets_asset', multiple: true, name: "category[attached_assets_attributes][][asset]") %>
  </div>
</div>


<div class="form-group">
  <%= f.label  "Unterkategorie von" %>
  <% categories_array = Category.all.map{ |category| [category.name + "/" + truncate(category.description, :length => 30), category.id, category.children.empty? ? "" : {class: 'bold'}] } %>
  <%= select(:category, :parent_id, options_for_select(categories_array), include_blank: "---" ) %>
</div>




